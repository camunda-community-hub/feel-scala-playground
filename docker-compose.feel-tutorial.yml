
version: '3.8'

volumes:
  certs:

networks:
  camunda-platform: { }

services:
  feel-tutorial:
    container_name: feel-tutorial
    build:
      context: .
    ports:
      - "8080:8080"
    volumes:
      - ./certs:/opt/certs
    environment:
      PORT: 8080
      ZEEBE_BASE_URL: zeebe.ultrawombat.com
      ZEEBE_AUTH_URL: https://login.cloud.ultrawombat.com/oauth/token
      ZEEBE_REGION: bru-2
      ZEEBE_CLUSTER_ID: xxx
      ZEEBE_CLIENT_ID: xxx
      ZEEBE_CLIENT_SECRET: xxx
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 1000M
        reservations:
          memory: 1000M
    healthcheck:
      test: ["CMD", "curl", "-f", "http://feel-tutorial:8080/swatter-ui"]
      interval: 30s
      timeout: 10s
      retries: 5
    restart: always
    networks:
      - camunda-platform
